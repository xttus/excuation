<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="dark light" />
    <title>Execution Panel (MVP)</title>
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <noscript>需要启用 JavaScript 才能使用。</noscript>

    <header class="topbar">
      <div class="brand">
        <div class="brand__title">Execution Panel</div>
        <div class="brand__subtitle">现在这一刻，我该做什么？</div>
      </div>
      <div class="topbar__stats" id="stats"></div>
    </header>

    <main class="container" id="app" aria-live="polite"></main>

    <div class="toast" id="toast" role="status" aria-live="polite" aria-atomic="true"></div>

    <div class="modal-root" id="modalRoot" aria-hidden="true"></div>

    <script>
      // If the module script fails to load (common when opened via file:// or bad caching),
      // show a visible hint instead of a blank page.
      window.__APP_BOOT__ = { ok: false, startedAt: Date.now() };
      window.setTimeout(() => {
        if (window.__APP_BOOT__ && window.__APP_BOOT__.ok) return;
        const app = document.getElementById("app");
        if (!app) return;
        app.innerHTML =
          '<div class="card"><div class="h1">页面没有加载成功</div>' +
          '<div class="muted">请用本地静态服务器打开（例如：python -m http.server 5173，然后访问 http://localhost:5173/），并在 DevTools Console 查看报错。</div>' +
          "</div>";
      }, 800);
    </script>
    <script type="module">
      try {
        await import("./app.js");
        window.__APP_BOOT__.ok = true;
      } catch (e) {
        window.__APP_BOOT__.ok = false;
        // Surface error in console for debugging.
        console.error("[boot] failed to load app.js", e);
      }
    </script>
  </body>
</html>
